var OmniFaces=OmniFaces||{};OmniFaces.FixViewState=function(){function e(e){for(var t=e.getElementsByTagName("update"),n=0;n<t.length;n++)if(r.exec(t[n].getAttribute("id")))return t[n].firstChild.nodeValue;return null}function t(e){for(var t=e.elements,n=0;n<t.length;n++)if(t[n].name==i)return t[n];return null}function n(e,t){var n;try{n=document.createElement("<input name='"+i+"'>")}catch(a){n=document.createElement("input"),n.setAttribute("name",i)}n.setAttribute("type","hidden"),n.setAttribute("value",t),n.setAttribute("autocomplete","off"),e.appendChild(n)}var a={},i="javax.faces.ViewState",r=new RegExp("^([\\w]+:)?"+i.replace(/\./g,"\\.")+"(:[0-9]+)?$");return a.apply=function(a){if("undefined"!=typeof a){var i=e(a);if(i)for(var r=0;r<document.forms.length;r++){var u=document.forms[r],o=t(u);"post"!=u.method||o?"get"==u.method&&o&&o.parentNode.removeChild(o):n(u,i)}}},a}(),"undefined"!=typeof jsf&&jsf.ajax.addOnEvent(function(e){"success"==e.status&&OmniFaces.FixViewState.apply(e.responseXML)}),"undefined"!=typeof jQuery&&jQuery(document).ajaxComplete(function(e,t){"undefined"!=typeof t&&OmniFaces.FixViewState.apply(t.responseXML)});