<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>JFlow-QMS Login</title>

        <f:facet name="first">

            <!-- Meta, title, CSS, favicons, etc. -->
            <meta charset="utf-8"/>
            <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>

            <meta http-equiv="x-ua-compatible" content="ie=edge"/>

            <meta http-equiv="X-UA-Compatible" content="IE=11"/>
            <meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
            <meta http-equiv="Content-Type"    content="text/html; charset=UTF-8"/>
            <meta http-equiv="pragma"          content="no-cache"/>
            <meta http-equiv="cache-control"   content="no-cache"/>
            <meta http-equiv="expires"         content="0"/>

            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <meta http-equiv="refresh" content="#{facesContext.externalContext.sessionMaxInactiveInterval};url=#{request.contextPath}/app/login.xhtml"/>
        </f:facet>

        <!-- Bootstrap core CSS -->
        <link href="resources/gentelella/css/bootstrap.min.css" rel="stylesheet"></link>

        <link href="resources/gentelella/fonts/css/font-awesome.css" rel="stylesheet"></link>
        <link href="resources/gentelella/css/animate.min.css" rel="stylesheet"> </link>

        <!-- Custom styling plus plugins -->
        <link href="resources/gentelella/css/custom.css" rel="stylesheet"></link>
        <link href="resources/gentelella/css/icheck/flat/green.css" rel="stylesheet"></link>

        <h:outputScript name="jquery/jquery.js" library="primefaces" target="head" />

        <h:outputStylesheet name="css/main.css"/>
        <h:outputStylesheet name="css/ajax-login.css"/>

        <!--[if lt IE 9]>
       <script src="../assets/js/ie8-responsive-file-warning.js"></script>
       <![endif]-->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
              <![endif]-->

    </h:head>
    <h:body style="background:#F7F7F7;">



        <div id="wrapper">
            
            <div id="login" class="animate form">

                <section class="login_content">

                    <p class="login-box-msg">Completar para iniciar sesión</p>
                    <h:form id="loginForm">
                        <h1>JFlowQMS - Login</h1>
                        <p:focus for="username"/>
                        <p:defaultCommand target="loginbtn"/>
                        <p:growl id="errorLogin" showDetail="true" life="3000"/>
                        <div>
                            <p:inputText id="username" styleClass="form-control username" 
                                         placeholder="Nombre de Usuario" 
                                         required="true" requiredMessage="Se debe indicar usuario"
                                         value="#{authenticationBean.username}"/>
                            <span class="glyphicon glyphicon-user form-control-feedback"></span>
                        </div>

                        <div>
                            <p:password  id="password" styleClass="form-control password" 
                                         required="true" requiredMessage="Se debe indicar contraseña"
                                         placeholder="Contraseña" value="#{authenticationBean.password}"/>
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>

                        </div>

                        <div class="col-md-6">
                            <div id="statusDiv" style="display: none;">

                                <div class="spinner">
                                    <div class="rect1"></div>
                                    <div class="rect2"></div>
                                    <div class="rect3"></div>
                                    <div class="rect4"></div>
                                    <div class="rect5"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <p:commandLink id="loginbtn" type="button"
                                           styleClass="btn btn-primary btn-flat pull-right btnLogin" 
                                           action="#{authenticationBean.doLogin()}" ajax="true" update="errorLogin">
                                <i class="fa fa-lock" aria-hidden="true"></i> Entrar
                            </p:commandLink>


                        </div>
                        <div class="clearfix"></div>
                        <div class="separator">

                            <br />
                            <div>
                                <!--<h1><i class="fa fa-paw" style="font-size: 26px;"></i> JFlowQMS!</h1>-->

                                <p>©2015 All Rights Reserved. JFlowQMS!</p>
                            </div>
                        </div>
                    </h:form>
                    <!-- form -->
                </section>
                <!-- content -->
            </div>


        </div>


        <p:ajaxStatus onstart="disabledInput(true)" 
                      onsuccess="disabledInput(false)" onerror="alert('Error');" />
        <script >
            function disabledInput(disabled) {
                if (disabled) {
                    $('.btnLogin').addClass('disabled');
                    $('#statusDiv').show();
                } else {
                    $('.btnLogin').removeClass('disabled');
                    $('#statusDiv').hide();
                }
            }
        </script>
    </h:body>
</html>

